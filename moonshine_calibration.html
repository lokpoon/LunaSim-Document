
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>7. MoonShineP: Calibration &#8212; MoonShine Instruction Manual</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="8. MoonShineP: Launch procedure" href="moonshine_launch_procedure.html" />
    <link rel="prev" title="6. MoonShineP: Software setup" href="moonshine_software_setup.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">MoonShine Instruction Manual</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="overview.html">
                    Updated Sep 21, 2023
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="lux_calculator.html">
   1.
   <span style="font-variant:small-caps;">
    MoonShineR
   </span>
   : R package
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="moonlight_LED_scheduler.html">
   2.
   <span style="font-variant:small-caps;">
    MoonShineR
   </span>
   : Moonlight scheduler
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="sunlight_twilight_LED_scheduler.html">
   3.
   <span style="font-variant:small-caps;">
    MoonShineR
   </span>
   : Sunlight/twilight scheduler
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="edit_LED_schedule_csv.html">
   4. Edit LED schedule
   <code class="docutils literal notranslate">
    <span class="pre">
     .csv
    </span>
   </code>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="moonshine_hardware_setup.html">
   5.
   <span style="font-variant:small-caps;">
    MoonShineP
   </span>
   : Hardware setup
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="moonshine_software_setup.html">
   6.
   <span style="font-variant:small-caps;">
    MoonShineP
   </span>
   : Software setup
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   7.
   <span style="font-variant:small-caps;">
    MoonShineP
   </span>
   : Calibration
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="moonshine_launch_procedure.html">
   8.
   <span style="font-variant:small-caps;">
    MoonShineP
   </span>
   : Launch procedure
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="download.html">
   Download files
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="reference.html">
   References
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/Crampton-Lab/MoonShine/master?urlpath=tree/docs/moonshine_calibration.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/Crampton-Lab/MoonShine"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/Crampton-Lab/MoonShine/issues/new?title=Issue%20on%20page%20%2Fmoonshine_calibration.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="_sources/moonshine_calibration.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download notebook file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-code"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        <a href="_sources/moonshine_calibration.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#moonlight-re-creation">
   Moonlight re-creation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#create-a-calibration-schedule">
   Create a calibration schedule
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#which-nd-filter-sheets">
     Which ND filter sheets?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#calibrating-span-style-font-variant-small-caps-moonshinep-span-with-a-radiometer">
     Calibrating
     <span style="font-variant:small-caps;">
      MoonShineP
     </span>
     with a radiometer
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#sunlight-and-twilight-re-creation">
   Sunlight and twilight re-creation
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-more-led-strips">
     Using more LED strips
    </a>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>7. <span style="font-variant:small-caps;">MoonShineP</span>: Calibration</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#moonlight-re-creation">
   Moonlight re-creation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#create-a-calibration-schedule">
   Create a calibration schedule
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#which-nd-filter-sheets">
     Which ND filter sheets?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#calibrating-span-style-font-variant-small-caps-moonshinep-span-with-a-radiometer">
     Calibrating
     <span style="font-variant:small-caps;">
      MoonShineP
     </span>
     with a radiometer
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#sunlight-and-twilight-re-creation">
   Sunlight and twilight re-creation
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-more-led-strips">
     Using more LED strips
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="span-style-font-variant-small-caps-moonshinep-span-calibration">
<span id="content-lightbox-calibration"></span><h1>7. <span style="font-variant:small-caps;">MoonShineP</span>: Calibration<a class="headerlink" href="#span-style-font-variant-small-caps-moonshinep-span-calibration" title="Permalink to this headline">#</a></h1>
<section id="moonlight-re-creation">
<h2>Moonlight re-creation<a class="headerlink" href="#moonlight-re-creation" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>To achieve realistic moonlight level illuminance, the LED arrays must be physically dimmed. We layer neutral density (ND) filter paper on the lightbox to reduce the light intensity, without modifying the color spectrum (<a class="reference internal" href="moonshine_hardware_setup.html#box"><span class="std std-numref">Fig. 33</span></a>)), until a ‘calibration value’ is achieved.</p></li>
<li><p>The user must first decide whether to re-create unobstructed ground illumination (i.e., a simulation in which there is no additional dimming), or to recreate light with a desired attenuation level so as to mimic the illumination levels of a natural habitat.</p></li>
<li><p>For the re-creation of full moon illuminance with no additional dimming, we recommend a ‘calibration value’ exceeding 0.36 lx but less than approximately 0.5. In brief, this value is achieved as follows: 1)  Configure the LED array to its maximum brightness (i.e., all LEDs illuminated at their maximum value for the particular RGBW ratio used).  2) Using a low-light radiometer to monitor the light level at a fixed position near the experimental arena. 3) Add layers of neutral density filter papers onto the light box until the light is dimmed to &gt; 0.36 lx but &lt; approximately 0.5 lx when measured by the radiometer at its fixed position.</p></li>
<li><p>The justification for the &gt; 0.36 &lt; ~ 0.5 range of calibration values is that the maximum possible ground illuminance of a full moon is 0.36 lx (see Section 4.2 of the paper); most full moons are much dimmer than this. Henceforth we use the example of a calibration value of 0.4 lx. It is important to understand that a calibration value of 0.4 lx does not mean that the full moon re-created by MoonShine will be 0.4 lx. Instead, this calibration value simply ensures that any illuminance below 0.4 lx will be re-created accurately. By calibrating the lightbox to a value exceeding 0.36 lx but less than ~ 0.5 lx (the closer to 0.36 lx, the better), we ensure that <em><span style="font-variant:small-caps;">MoonShineP</span></em> can precisely re-create, with optimal accuracy, the entire range of natural moonlight illuminance predicted by <em><span style="font-variant:small-caps;">MoonShineR</span></em>.</p></li>
</ul>
</section>
<section id="create-a-calibration-schedule">
<span id="content-calibration-schedule"></span><h2>Create a calibration schedule<a class="headerlink" href="#create-a-calibration-schedule" title="Permalink to this headline">#</a></h2>
<p>Use the provided <code class="docutils literal notranslate"><span class="pre">manual_scheduler.xlsx</span></code> (see <a class="reference internal" href="edit_LED_schedule_csv.html#content-excel-scheduler"><span class="std std-ref">Option 2: Create LED schedule manually using manual_scheduler.xlsx</span></a>) to create a <code class="docutils literal notranslate"><span class="pre">LED_schedule_moon.csv</span></code> that turns on the LEDs at full intensity (with spectral control applied).</p>
<ol class="simple">
<li><p>. In <code class="docutils literal notranslate"><span class="pre">manual_scheduler.xlsx</span></code>, set theoretical_max to the calibration value (here we continue with the example of 0.4 lx).</p></li>
<li><p>Fill the entire column of “desired illuminance” with 0.4. This tells the LEDs to produce 100% intensity (i.e., 0.4/0.4 = 100%).</p></li>
<li><p>Set the spectral control as desired (leave it as default for natural moonlight spectrum).</p></li>
<li><p>Make the schedule to last for 2 hours (or a period sufficient to perform the calibration period) for a time period in the near future, at the time the calibration will be performed.</p></li>
<li><p>Follow the rest of the instructions in <a class="reference internal" href="edit_LED_schedule_csv.html#content-excel-scheduler"><span class="std std-ref">Option 2: Create LED schedule manually using manual_scheduler.xlsx</span></a> to save the <code class="docutils literal notranslate"><span class="pre">LED_schedule_moon.csv</span></code></p></li>
<li><p>This schedule file will instruct <em><span style="font-variant:small-caps;">MoonShineP</span></em> to generate full intensity light for the purpose of calibration.</p></li>
</ol>
<section id="which-nd-filter-sheets">
<h3>Which ND filter sheets?<a class="headerlink" href="#which-nd-filter-sheets" title="Permalink to this headline">#</a></h3>
<p>Lee ND filter sheets are available with multiple light transmission values. For example:
- Lee 298 (ND 0.15, ½ Stop) = Transmission 69.3%
- Lee 209 (ND 0.3, 1 Stop) = Transmission 51.2%
- Lee 210 (ND 0.6, 2 Stop) = Transmission 23.5%
- Lee 211 (ND 0.9, 3 Stop) = Transmission 13.7%
- Lee 299 (ND 1.2, 4 Stop) = Transmission 6.6%</p>
<p>To make an informed decision on what combination of ND filter sheets is needed for the user’s specific room and setup, perform the following steps:</p>
<ol class="simple">
<li><p>Position the lightboxes at their permanent locations. Ideally the lightboxes should be put on shelves at opposite sides of the room, so that the light is directed to the ceiling and diffusely illuminates the entire room. The room should preferably have a white or light-shaded ceiling so as to minimize the change in the light spectrum.</p></li>
<li><p>Using the previously created calibration <code class="docutils literal notranslate"><span class="pre">LED_schedule_moon.csv</span></code>, launch <em><span style="font-variant:small-caps;">MoonShineP</span></em> (see <a class="reference internal" href="moonshine_launch_procedure.html#content-launch"><span class="std std-ref">8. MoonShineP: Launch procedure</span></a>).</p></li>
<li><p>Using a radiometer, measure the illuminance at the position of the animal enclosure. Let us say that it measures 100 lx.</p></li>
</ol>
<ul class="simple">
<li><p>To target a full moon illuminance &gt; 0.36 &lt; ~0.5 lx, begin by estimating the light value that will be produced by the lightbox using a combination of Lee filters stacked onto the opening of the lightbox.</p></li>
<li><p>For instance, if two single Lee ND 299 sheet (each with 6.6% transmission) were used to filter the LEDS, the illumination would be reduced from 100 lx to approximately 0.44 lx (100 x 0.066 x 0.066). Since this value is close to the target range, this would be a good starting point.</p></li>
<li><p>The above calculation is only to get a crude idea of which ND filter to buy. We recommend buying some additional sheets with high transmission percentages (i.e. sheets that block only small amounts of light) for fine-tuning purposes. Next we must calibrate <em><span style="font-variant:small-caps;">MoonShineP</span></em> by measuring the illuminance.</p></li>
</ul>
</section>
<section id="calibrating-span-style-font-variant-small-caps-moonshinep-span-with-a-radiometer">
<span id="content-lightbox-radiometer"></span><h3>Calibrating <span style="font-variant:small-caps;">MoonShineP</span> with a radiometer<a class="headerlink" href="#calibrating-span-style-font-variant-small-caps-moonshinep-span-with-a-radiometer" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p>Using the previously created calibration <code class="docutils literal notranslate"><span class="pre">LED_schedule_moon.csv</span></code>, launch <em><span style="font-variant:small-caps;">MoonShineP</span></em> (see <a class="reference internal" href="moonshine_launch_procedure.html#content-launch"><span class="std std-ref">8. MoonShineP: Launch procedure</span></a>).</p></li>
<li><p>Next, the calibration method depends on whether a low light sensitive radiometer (able to accurately measure 0.01 lx) is available.</p>
<ul>
<li><p>If available,</p>
<ol class="simple">
<li><p>Layer filters on the lightbox until the radiometer sensor placed on the ground of the animal housing reads a target illuminance between 0.36 lx and ~0.5 lx. Because every additional ND filter layers attenuate illuminance in a certain fraction, it can be difficult to attenuate the illuminance to within this narrow range. We recommend purchasing multiple filter papers with small light-attenuation percentages to make this process easier.</p></li>
<li><p>Once a value between 0.36 and ~0.5 lx is achieved, record this illuminance measurement. This is the calibration value.</p></li>
<li><p>Put in this calibration value as the theoretical_max value in <em><span style="font-variant:small-caps;">MoonShineR</span>: Moonlight led scheduler</em> when generating a <code class="docutils literal notranslate"><span class="pre">LED_schedule_moon.csv</span></code>. The <em><span style="font-variant:small-caps;">MoonShineP</span></em> system is now calibrated.</p></li>
</ol>
</li>
<li><p>If only a non-low light sensitive radiometer is available (i.e., one incapable of reading lower than 0.1 lx, but has a resolution of +/- 1 lx or better):</p>
<ol class="simple">
<li><p>Instead measure the room illuminance with no filter applied. Then repeat the measurement but now with the radiometer pointing directly at the LED light at a close distance.</p></li>
<li><p>The ratio between the room illuminance and direct illuminance should remain relatively constant as more filters are applied.</p></li>
<li><p>In this manner estimate how many layers of filter are required to reduce the illuminance to reach the target.</p></li>
<li><p>Then follow the above concepts described for calibrating the system described for the low light sensitive radiometer.</p></li>
</ol>
</li>
</ul>
</li>
</ul>
<figure class="align-default" id="days">
<img alt="_images/10days.png" src="_images/10days.png" />
<figcaption>
<p><span class="caption-number">Fig. 36 </span><span class="caption-text"><span style="font-variant:small-caps;">MoonShineP</span>’s performance in re-creating moonlight illuminance level after calibration. MoonShineR prediction = black line. Radiometer measurements of the re-created illuminance = red line. Note that the lines are very close. This test was performed in a lab setting, running a simulated LED schedule for 9 nights around a full moon.</span><a class="headerlink" href="#days" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the user intends to heavily modify the color spectrum of the LED arrays, for example to recreate a color-shifted habitat, radiometer measured illuminance (in lx) is not an appropriate unit. This is because photopic illuminance measurements assume a “natural light spectrum” (i.e. light similar to natural sunlight). In these cases the user should instead measure light level and calibrate <span style="font-variant:small-caps;">MoonShineP</span> in spectral irradiance (unit photons OR Watts per m2 s nm) using a spectrometer.</p>
</div>
</section>
</section>
<section id="sunlight-and-twilight-re-creation">
<span id="content-lightbox-sun-calibration"></span><h2>Sunlight and twilight re-creation<a class="headerlink" href="#sunlight-and-twilight-re-creation" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>To achieve sunlight level illuminance, dimming of the LEDs is not required.</p></li>
<li><p>The user must first decide what level of sunlight illuminance they require. Direct overhead sunlight can be over 100,000 lx. It is probably impractical and unnecessary to re-create such high levels of illuminance.</p></li>
<li><p>Nonetheless, we recommend the re-creation of sunlight at well over 200 lx, since 200 lx is approximately the illuminance when the sun is at the horizon. This means that if the light cannot achieve 200 lx, <em><span style="font-variant:small-caps;">MoonShineP</span></em> is not even re-creating the full range of twilight illuminance.</p></li>
<li><p>The LED strip can be adhered to the ceiling, with the LEDs pointing downward, to illuminate the room like a fluorescent light fixture, or it could be adhered directly above the animal enclosure to provide a much stronger light intensity. As a reference, the illuminance measurement at 50cm from a warm white 144-LED SK6812 LED strip is around 1000 lx.</p></li>
<li><p>Although it is nearly impossible to re-create full intensity sunlight using <em><span style="font-variant:small-caps;">MoonShineP</span></em> (i.e., the illuminance level would shortly plateau after sunrise), the sunlight LED array still need to be calibrated to ensure correct illuminance levels before the plateau occurs (twilight and the short period after sunrise). To calibrate the sunlight LED array, follow these steps:</p>
<ol class="simple">
<li><p>Instruct the sunlight LED array to produce light at full intensity. See <span class="xref std std-ref">calibration_schedule</span> to create a sunlight version of the calibration schedule (<code class="docutils literal notranslate"><span class="pre">LED_schedule_sun.csv</span></code>).</p></li>
<li><p>Measure the illuminance on the level of the animal enclosure with a radiometer. This is the calibration point for the sunlight/twilight LED array.</p></li>
<li><p>Use this calibration point as the theoretical_max value in <em><span style="font-variant:small-caps;">MoonShineR</span>: Sunlight/twilight LED scheduler</em>.</p></li>
</ol>
</li>
</ul>
<section id="using-more-led-strips">
<h3>Using more LED strips<a class="headerlink" href="#using-more-led-strips" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p>Two LED strips may not be enough to re-create the desired illuminance, but more LED strips can be daisy chained together, as follows:</p>
<ul>
<li><p>Connect additional LED strips by following <a class="reference internal" href="moonshine_hardware_setup.html#schematic"><span class="std std-numref">Fig. 30</span></a></p></li>
<li><p>Add LED strips <strong>in multiple of two</strong>.</p></li>
<li><p>See <a class="reference internal" href="moonshine_software_setup.html#content-lightbox-lednumber3"><span class="std std-ref">Setting LED numbers in moonshine_moon.py and moonshine_sun.py</span></a> for how to update the number of LEDs in the software.</p></li>
</ul>
</li>
</ul>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="moonshine_software_setup.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">6. <span style="font-variant:small-caps;">MoonShineP</span>: Software setup</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="moonshine_launch_procedure.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">8. <span style="font-variant:small-caps;">MoonShineP</span>: Launch procedure</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By C. Lok Poon, Ian T. Jenks & W.G.R., Crampton. University of Central Florida.<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>
# Overview
## Overview of <span style="font-variant:small-caps;">MoonShine</span> and it's companion program <span style="font-variant:small-caps;">MoonSim</span>
## _<span style="font-variant:small-caps;">MoonSim</span>_

_<span style="font-variant:small-caps;">MoonShine</span>_ is an open-source software-hardware system for re-creating moonlight cycles (as well as sunlight and twilight cycles) in a laboratory setting, using artificial LED light. _<span style="font-variant:small-caps;">MoonShine</span>_ comprises a Python program running on a Raspberry Pi computer that controls the intensity of an array of individually addressable LEDs positioned in diffusion boxes. _<span style="font-variant:small-caps;">MoonShine</span>_ uses a companion R program, _<span style="font-variant:small-caps;">MoonSim</span>_, to predict moonlight and/or solar ground illuminance values (in lux) through a defined time range, at any geographical location. The predicted illuminance are converted into LED intensity values and saved to a .csv schedule file. _<span style="font-variant:small-caps;">MoonShine</span>_ uses this file to control the LED array. _<span style="font-variant:small-caps;">MoonSim</span>_ can also be used to predict moonlight ground illuminance for use as a model predictor variable. This document is a tutorial and operating manual for _<span style="font-variant:small-caps;">MoonShine</span>_ and _<span style="font-variant:small-caps;">MoonSim</span>_.

_<span style="font-variant:small-caps;">MoonSim</span>_ is a suite of three R programs that predict the ground illuminance of moonlight, twilight, and sunlight at any geographic location and any time (or range of times). The three versions of _<span style="font-variant:small-caps;">MoonSim</span>_ _<span style="font-variant:small-caps;">R</span>_ programs have different purposes, and generate different outputs accordingly:

1. _**<span style="font-variant:small-caps;">MoonSim</span>: Lux calculator**_ simply predicts moonlight and twilight illuminance. It is intended for use in field studies where a biologist requires moonlight illuminance values as a model predictor variable.

_**<span style="font-variant:small-caps;">MoonSim</span>: Moonlight scheduler**_ and _**<span style="font-variant:small-caps;">MoonSim</span>: Sunlight & twilight scheduler**_ are designed for use in combination with _<span style="font-variant:small-caps;">MoonShine</span>_.

2. _**<span style="font-variant:small-caps;">MoonSim</span>: Moonlight scheduler**_ predicts only moonlight illuminance values, and convert these into LED intensity values.  It outputs a `LED_schedule_moon.csv` table that serves as the schedule for _<span style="font-variant:small-caps;">MoonShine</span>_.

3. _**<span style="font-variant:small-caps;">MoonSim</span>: Sunlight & twilight scheduler**_ predicts only sunlight and twilight illuminance values and converts these into LED intensity values. It outputs a `LED_schedule_sun.csv` table that serves as a schedule for _<span style="font-variant:small-caps;">MoonShine</span>_.

## _<span style="font-variant:small-caps;">MoonShine</span>_

_<span style="font-variant:small-caps;">MoonShine</span>_ is an LED control system for recreating realistic moonlight, twilight, and sunlight regimes in a laboratory. A light regime can be freely edited, making it ideal for experiments requiring a specific lighting scenario. _<span style="font-variant:small-caps;">MoonShine</span>_ runs a Python program on the Linux operating system of a Raspberry Pi computer to control an array of LEDs. Every minute, the python program reads the light schedule (generated by _<span style="font-variant:small-caps;">MoonSim</span>: schedulers_) to refresh the LED intensities. Users can run a moonlight schedule as well as a sunlight and twilight schedule simultaneously on the Pi. In this way, the Pi can separately control two arrays of LED strips, so as to fully re-create all three major sources of natural light, around the clock (see concept in {numref}`map`).

```{figure} /images/map.png
:name: map
:width: 600px
A flowchart of how MoonShine works with the .csv schedule files created by MoonSim to re-create light. MoonShine can either create moonlight only (in a custom-made lightbox with neutral density filter sheets to calibrate light levels to natural moonlight levels), or sunlight and twilight (in a custom made lightbox without filter sheets), or both moonlight and sunlight + twilight together (in two lightboxes, a filtered one for moonlight, and an unfiltered one for sunlight + twilight).
```

## Table of contents
```{tableofcontents}

```

## Key to manual

- File names are indicated in pink text, e.g. `xxx.csv`
- File pathways names are denoted in italics, e.g., _Pi/Desktop/control_moon_
- R code, Python code, or terminal commands are shown in boxes. E.g.,
    ```
    this is a line of code
    ```
- Codes are also denoted in italics and single quotation marks, e.g., '_this is a line of code_'
- Internal hyperlinks within this documents & links to external websites are denoted with blue text.

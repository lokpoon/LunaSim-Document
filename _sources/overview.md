
# Overview

### How to cite _<span style="font-variant:small-caps;">MoonShine</span>_
Poon, L., Jenks, I. T., Crampton, W. G. R. (2024). MoonShine: A software-hardware system for simulating moonlight ground illuminance and re-creating artificial moonlight cycles in a laboratory environment. Methods in Ecology and Evolution. Accepted for publication (Jan 30, 2024).

## <span style="font-variant:small-caps;">MoonShineP</span> and its companion program <span style="font-variant:small-caps;">MoonShineR</span>



_<span style="font-variant:small-caps;">MoonShineP</span>_ is an open-source software-hardware system for re-creating moonlight cycles (as well as sunlight and twilight cycles) in a laboratory setting, using LED light. _<span style="font-variant:small-caps;">MoonShineP</span>_ comprises a Python program running on a Raspberry Pi computer that controls the intensity of an array of individually addressable LEDs positioned in diffusion boxes. _<span style="font-variant:small-caps;">MoonShineP</span>_ uses a companion R package with accompanying R scripts, _<span style="font-variant:small-caps;">MoonShineR</span>_, to predict moonlight and/or solar ground illuminance values (in lux) through a defined time range, at any geographical location. The predicted illuminance values are converted into LED intensity values and saved to a `.csv` schedule file. _<span style="font-variant:small-caps;">MoonShineP</span>_ uses this file to control the LED array. _<span style="font-variant:small-caps;">MoonShineR</span>_ can also be used to predict moonlight ground illuminance for use as a model predictor variable. This document is a tutorial and operating manual for _<span style="font-variant:small-caps;">MoonShineP</span>_ and _<span style="font-variant:small-caps;">MoonShineR</span>_.

_<span style="font-variant:small-caps;">MoonShineR</span>_ is a R package and two R scripts designed to predict the ground illuminance of moonlight, twilight, and sunlight at any geographic location and any time or range of times. Each of the three versions of _<span style="font-variant:small-caps;">MoonShineR</span>_ programs serves a different purposes, and generates outputs tailored to that purpose.

All the required files are hosted on the GitHub site:
[https://github.com/Crampton-Lab/MoonShine](https://github.com/Crampton-Lab/MoonShine)

1. _**<span style="font-varianRt:small-caps;">MoonShineR</span>: R package**_ simply predicts moonlight/twilight/sunlight illuminance. It is intended for use in field studies where a biologist requires moonlight illuminance values as a model predictor variable.

_**<span style="font-variant:small-caps;">MoonShineR</span>: Moonlight scheduler**_ and _**<span style="font-variant:small-caps;">MoonShineR</span>: Sunlight & twilight scheduler**_ are designed for use in combination with _<span style="font-variant:small-caps;">MoonShineP</span>_ ({numref}`map`).

2. _**<span style="font-variant:small-caps;">MoonShineR</span>: Moonlight scheduler**_ predicts only moonlight illuminance values and convert these into LED intensity values.  It generates an `LED_schedule_moon.csv` table that serves as the schedule for _<span style="font-variant:small-caps;">MoonShineP</span>_.

3. _**<span style="font-variant:small-caps;">MoonShineR</span>: Sunlight & twilight scheduler**_ predicts only sunlight and twilight illuminance values and converts these into LED intensity values. It generates an `LED_schedule_sun.csv` table that serves as a schedule for _<span style="font-variant:small-caps;">MoonShineP</span>_.

## _<span style="font-variant:small-caps;">MoonShineP</span>_

_<span style="font-variant:small-caps;">MoonShineP</span>_ is an LED control system for recreating realistic moonlight, twilight, and sunlight regimes in a laboratory setting. A light regime can be freely edited, making it ideal for experiments requiring a specific lighting scenario. _<span style="font-variant:small-caps;">MoonShineP</span>_ runs a Python program on the Linux operating system of a Raspberry Pi computer to control an array of LEDs. Every minute, the Python program reads the light schedule (generated by _<span style="font-variant:small-caps;">MoonShineR</span>: schedulers_) to refresh the LED intensities. Users can run a moonlight schedule as well as a sunlight and twilight schedule simultaneously on the Raspberry Pi. In this way, the Raspberry Pi can separately control two arrays of LED strips, so as to fully re-create all three major sources of natural light, around the clock (see concept in {numref}`map`).

```{figure} /images/map.png
:name: map
:width: 600px
A flowchart of how <span style="font-variant:small-caps;">MoonShineP</span> works with the `.csv` schedule files created by <span style="font-variant:small-caps;">MoonShineR</span> to re-create light. <span style="font-variant:small-caps;">MoonShineP</span> can either create moonlight only (in a custom-made lightbox with neutral density filter sheets to calibrate light levels to natural moonlight levels), or sunlight and twilight (with the LEDs affixed to the ceiling, and no filtering utilized), or both moonlight and sunlight + twilight together.
```

## Table of contents
```{tableofcontents}

```

## Key to manual

- File names are indicated in pink text, for example `xxx.csv`.
- File pathways names are indicated in italics, for example, _Pi/Desktop/control_moon_
- Column names are also indicated in italics with single quote marks, for example, '_datetime_'.
- R code, Python code, or terminal commands are shown in boxes. For example,
    ```
    this is a line of code
    ```
- Internal hyperlinks within this documents & links to external websites are indicated in blue text.

#### Manual last updated Feb 30, 2024